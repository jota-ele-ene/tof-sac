<!doctype html>
<html> 
  <head></head> 
  <!-- https://tokboxquickstart.herokuapp.com/cdxhbppqyi -->
  <body> 
    <!-- <div id='myPublisherDiv'></div> -->
    <div id='subscribersDiv'></div> 
    
    <script src='js/opentok.min.js'></script> 
  <!--  <script> 
      var apiKey = '45315992';
      var sessionId = '1_MX40NTMxNTk5Mn5-MTQ0MDE0OTY0MTM5OX5QdGhwa081WlprQ0xhMEhsaHVuODVZYWh-UH4'; 
      var token = 'T1==cGFydG5lcl9pZD00NTMxNTk5MiZzaWc9OTBmYjdlNTY2MTA2YzZhMWE0NDFiYWQ0ZDAzYjhjZjg0YWYxOWY1NDpyb2xlPXB1Ymxpc2hlciZzZXNzaW9uX2lkPTFfTVg0ME5UTXhOVGs1TW41LU1UUTBNREUwT1RZME1UTTVPWDVRZEdod2EwODFXbHByUTB4aE1FaHNhSFZ1T0RWWllXaC1VSDQmY3JlYXRlX3RpbWU9MTQ0MDE1MTMxMyZub25jZT0wLjIwOTM5MjYyMDkxNDc4MDE3JmV4cGlyZV90aW1lPTE0NDA3NTM3MTYmY29ubmVjdGlvbl9kYXRhPQ==';
      var session = OT.initSession(apiKey, sessionId); 
      session.on({ 
          streamCreated: function(event) { 
            session.subscribe(event.stream, 'subscribersDiv', {insertMode: 'append', showControls: true}); 
          } 
      }); 
      session.connect(token, function(error) {
        if (error) {
          console.log(error.message);
        } else {
          session.publish('myPublisherDiv', {width: 320, height: 240, name: "Pepito", showControls: true}); 
        }
      });
    </script> -->

	<button id="demo" onclick="myFunction()">Iniciar Sesión</button>

	<button id="demo2" onclick="myFunction2()">Finalizar Sesión</button>
	  
	<script>
			function myFunction() {
			console.log('estoy dentro de la función');
			  var apiKey = '45315992';
			  var sessionId = '2_MX40NTMxNTk5Mn5-MTQ0MTA5NzI5MTc0MX5TaG5SaGF4ZTlodGV1NDlDLzR6eGU2cGZ-UH4'; 
			  var token = 'T1==cGFydG5lcl9pZD00NTMxNTk5MiZzaWc9OTgyOTQyOGY5ZGY5YTY5ZTM3MmEyYTg5Y2FhMTVhNjIyMTA5ODQ1ZDpyb2xlPXN1YnNjcmliZXImc2Vzc2lvbl9pZD0yX01YNDBOVE14TlRrNU1uNS1NVFEwTVRBNU56STVNVGMwTVg1VGFHNVNhR0Y0WlRsb2RHVjFORGxETHpSNmVHVTJjR1otVUg0JmNyZWF0ZV90aW1lPTE0NDEwOTkwODMmbm9uY2U9MC42NjAyOTA3NDI5NzQ3Nzc1JmV4cGlyZV90aW1lPTE0NDM2ODkyNDAmY29ubmVjdGlvbl9kYXRhPQ==';
			  var session = OT.initSession(apiKey, sessionId); 
			  session.on({ 
				  streamCreated: function(event) { 
					session.subscribe(event.stream, 'subscribersDiv', {width: 800, height: 600, insertMode: 'append', showControls: true}); 
					console.log('Estoy conectado a una sesión', sessionId, token);
					
				  } 
			  }); 
			  session.connect(token, function(error) {
				if (error) {
				  console.log(error.message);
				} else {
				  /*session.publish('myPublisherDiv', {width: 800, height: 600, showControls: true}); */
				  console.log('Estoy conectado a una sesión 2', sessionId, token);
				}
			  });
			  document.getElementById("demo").style.visibility = "hidden";
			  document.getElementById("demo2").style.visibility = "visible";
			  
		}
		</script>

		<script>
			function myFunction2() {
			  console.log('Estoy intentando desconectar');
			  var apiKey = '45315992';
			  var sessionId = '1_MX40NTMxNTk5Mn5-MTQ0MDE0OTY0MTM5OX5QdGhwa081WlprQ0xhMEhsaHVuODVZYWh-UH4'; 
			  var token = 'T1==cGFydG5lcl9pZD00NTMxNTk5MiZzaWc9OTBmYjdlNTY2MTA2YzZhMWE0NDFiYWQ0ZDAzYjhjZjg0YWYxOWY1NDpyb2xlPXB1Ymxpc2hlciZzZXNzaW9uX2lkPTFfTVg0ME5UTXhOVGs1TW41LU1UUTBNREUwT1RZME1UTTVPWDVRZEdod2EwODFXbHByUTB4aE1FaHNhSFZ1T0RWWllXaC1VSDQmY3JlYXRlX3RpbWU9MTQ0MDE1MTMxMyZub25jZT0wLjIwOTM5MjYyMDkxNDc4MDE3JmV4cGlyZV90aW1lPTE0NDA3NTM3MTYmY29ubmVjdGlvbl9kYXRhPQ==';
			  var session = OT.initSession(apiKey, sessionId); 
			  session.disconnect(token, function(error){
				  
				  if (error) {
					  console.log(error.message);
				  } else {
					  console.log('Te has desconectado a la sesión');
				  }
			  });
			  document.getElementById("demo").style.visibility = "visible";
			 document.getElementById("demo2").style.visibility = "hidden";
		}
		</script>
  </body> 
</html>  